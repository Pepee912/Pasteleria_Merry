<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/"></ion-back-button>
    </ion-buttons>
    <ion-title>Mis Pedidos</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding pedidos-content">

  <!-- Lista de pedidos -->
  <div *ngIf="pedidos.length > 0; else sinPedidos">
    <div class="tarjeta-pedido" *ngFor="let pedido of pedidos">
      <div class="pedido-info">
        <h3>ðŸ§¾ Pedido - {{ formatearFecha(pedido.fecha_pedido) }}</h3>
        <p><strong>Entrega:</strong> {{ formatearFecha(pedido.fecha_entrega) }}</p>
        <p><strong>Total:</strong> ${{ pedido.total }}</p>
        <p><strong>Estado:</strong> 
          <span class="estado" [ngClass]="pedido.estado">{{ pedido.estado }}</span>
        </p>

        <ion-note color="warning" *ngIf="pedido.estado === 'aceptado'">
          Tu pedido ha sido aceptado. Por favor, mantente atento a las indicaciones de entrega o recogida.
        </ion-note>
      </div>

      <!-- Acciones -->
      <div class="pedido-acciones" *ngIf="pedido.estado === 'pendiente'">
        <ion-button
          color="danger"
          fill="outline"
          size="small"
          (click)="cancelarPedido(pedido.documentId)">
          Cancelar
        </ion-button>
      </div>
    </div>
  </div>

  <!-- Mensaje si no hay pedidos -->
  <ng-template #sinPedidos>
    <div class="mensaje-vacio">
      <ion-text color="medium">
        <p class="ion-text-center">AÃºn no has realizado pedidos.</p>
      </ion-text>
    </div>
  </ng-template>

</ion-content>
