:host {
  --bg: #fff7fb;
  --brand: #b76e79;
  --accent: #f9a8d4;
  --text: #553d47;
  --muted: #7a6470;

  --radius: 16px;
  --page-max: 1200px;
}

ion-content { --background: var(--bg); }

/* Header consistente con el resto */
.header-blend {
  --background: #ffffffea;         /* fondo claro tipo glass */
  --color: var(--brand);           /* texto/íconos en color de marca */
  backdrop-filter: saturate(180%) blur(8px);
  border-bottom: 1px solid var(--accent);
}

.brand-min {
  font-family: 'Montserrat', system-ui, sans-serif;
  font-weight: 800;
  letter-spacing: .2px;
}

ion-back-button {
  --color: var(--brand);
}


/* Layout principal */
.wrap {
  max-width: var(--page-max);
  margin: 12px auto 96px; /* espacio para la barra fija móvil */
  padding: 0 12px;
  display: grid;
  grid-template-columns: 1fr;   /* móvil */
  gap: 14px;

  @media (min-width: 960px) {
    grid-template-columns: 1.1fr .9fr; /* desktop: dos columnas */
    gap: 18px;
    margin-bottom: 24px;
  }
}

/* Panel base */
.panel { background: transparent; }

/* Head de panel */
.panel-head {
  margin-bottom: 8px;

  &.sticky {
    position: sticky;
    top: 8px;
    z-index: 2;
    background: linear-gradient(180deg, rgba(255, 255, 255, .9) 0%, rgba(255, 255, 255, .6) 100%);
    backdrop-filter: blur(6px);
    border-radius: 12px;
    padding: 10px 12px;
    border: 1px solid #f3c2cc;
    box-shadow: 0 6px 14px rgba(183,110,121,.08);
  }

  h2 {
    margin: 0;
    color: var(--text);
    font-family: 'Montserrat', system-ui, sans-serif;
    font-weight: 900;
    font-size: 1.15rem;
  }

  .hint {
    margin: 4px 0 0;
    color: var(--muted);
    font-size: .9rem;
  }
}

/* Buscador */
.search-row {
  display: flex; gap: 8px; align-items: center;
  ion-searchbar {
    flex: 1;
    --background: #fff;
    --border-radius: 14px;
    --box-shadow: 0 4px 12px rgba(183,110,121,.12);
  }
  .btn-clear {
    --color: var(--brand);
    font-weight: 700;
  }
}

/* Chips de categoría */
.chips {
  display: flex; gap: 8px; overflow-x: auto; padding: 8px 2px 0;
}
.chip {
  --color: var(--brand);
  --background: #fff;
  --border-color: var(--accent);
  --border-radius: 999px;
  font-weight: 800;
}

/* Estados vacíos */
.estado-vacio {
  margin: 12px 2px 0;
  padding: 14px;
  background: #fff;
  border: 1px dashed #f3c2cc;
  border-radius: 12px;
  color: #6d4c56;

  &.soft { border-style: solid; border-color: #ffe6ef; }

  p { margin: 0 0 4px; font-weight: 700; }
  small { opacity: .85; }
}

/* Subtítulo */
.subhead {
  margin: 10px 2px 6px;
  color: #7f4b56;
  font-weight: 900;
  font-family: 'Montserrat', system-ui, sans-serif;
  font-size: 1rem;
}

/* Resultados (lista de productos) */
.lista-filtrada {
  max-height: 450px;
  overflow-y: auto;
  margin-top: 10px;

  &::-webkit-scrollbar { width: 8px; }
  &::-webkit-scrollbar-thumb { background: #f3c2cc; border-radius: 10px; }

  ion-list { background: transparent; }

  .producto-item {
    --background: #fff;
    border-radius: 14px;
    border: 1px solid #f9a8d4;
    box-shadow: 0 2px 8px rgba(183,110,121,.08);
    align-items: center;
    --padding-start: 10px;
    --padding-end: 10px;
    --min-height: 80px;
    margin-bottom: 12px;

    .thumb img {
      border-radius: 10px;
      object-fit: cover;
      width: 64px; height: 64px;
    }

    .info {
      h3 {
        margin: 0 0 4px;
        font-weight: 800;
        color: #7f4b56;
        font-size: 1rem;
      }
      .precio {
        margin: 0; font-size: .9rem; color: #5d4250; opacity: .9;
      }
    }

    .qty {
      display: flex; align-items: center; gap: 6px; margin-left: 8px;

      .btn-qty {
        --padding-start: 8px; --padding-end: 8px;
        --background: transparent; --color: var(--brand);
        border: 1px solid #f3c2cc; border-radius: 10px;
        height: 36px; min-width: 36px; font-size: 18px; line-height: 1;
      }

      .btn-add {
        --background: var(--brand);
        --color: #fff; --border-radius: 10px; height: 36px; min-width: 36px;
        padding: 0 10px; font-weight: 800;
      }

      .input-qty {
        --background: #fff; --color: #7f4b56; --placeholder-color: #caa4ad;
        text-align: center; width: 64px; height: 36px;
        border: 1px solid #f3c2cc; border-radius: 10px; font-weight: 700;
      }
    }
  }
  .producto-item:last-child { margin-bottom: 0; }
}

/* Ver más */
.ver-mas {
  display: flex; justify-content: center; margin-top: 8px;

  ion-button {
    --border-color: #f3c2cc;
    --color: #b76e79;
    font-weight: 800;
    border-radius: 12px;
  }
}

/* Panel pedido (derecha) */
.pedido-panel .lista-seleccionados {
  margin-top: 8px;

  ion-list { background: transparent; }

  .seleccionado-item {
    --background: #fff;
    border-radius: 14px;
    margin-bottom: 12px;
    border: 1px solid #f9a8d4;
    box-shadow: 0 2px 8px rgba(183,110,121,.08);
    --padding-start: 10px;
    --padding-end: 10px;

    .thumb img {
      border-radius: 10px;
      object-fit: cover;
      width: 56px; height: 56px;
    }

    h3 {
      margin: 0 0 6px;
      color: #7f4b56;
      font-weight: 800;
      font-size: 1rem;
    }

    .detalle-line {
      display: grid;
      grid-template-columns: repeat(3, auto);
      gap: 10px; align-items: center;
      font-size: .9rem; color: #5d4250;
      b { color: #7f4b56; }
    }
  }
}

/* Entrega */
.entrega {
  margin-top: 6px;

  ion-item {
    --background: #fff;
    border-radius: 14px;
    border: 1px solid #f9a8d4;
    box-shadow: 0 2px 8px rgba(183,110,121,.08);

    ion-label { color: var(--brand); font-weight: 800; }

    ion-datetime {
      --wheel-highlight-background: #fce8ee;
      --wheel-fade-background-rgb: 255,240,245;
      --background: #fff;
      width: 100%; min-height: 52px;

      &::part(calendar-day) { color: #6b4550; }
      &::part(today) { border-color: var(--brand); }
      &::part(indicator) { background: var(--brand); }
      &::part(time-body) { color: #6b4550; }
      &::part(title) { color: #7f4b56; }
    }
  }

  .msg-error { display: block; margin-top: 6px; }
  .entrega-visual {
    margin: 8px 2px 0; display: flex; gap: 8px; align-items: baseline;
    .etiqueta { color: #7f4b56; font-weight: 800; }
    .valor { color: #3f2a32; }
  }
}

/* Notas */
.notas-item {
  --background: #fff;
  border-radius: 14px;
  margin-top: 12px;
  border: 1px solid #f9a8d4;
  box-shadow: 0 2px 8px rgba(183,110,121,.08);

  ion-label { color: var(--brand); font-weight: 800; }
  ion-textarea {
    --background: #fff; --color: #6b4550; --placeholder-color: #c797a0;
    font-size: .98rem;
  }
}

/* Total + CTA en escritorio (dentro del panel derecho) */
.cta-desktop {
  display: none;

  @media (min-width: 960px) {
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 12px; align-items: center;
    margin-top: 12px;
  }

  .total {
    display: flex; flex-direction: column; line-height: 1.1;
    span { color: #6b4550; font-size: .86rem; }
    b { color: #7f4b56; font-size: 1.15rem; }
  }
  .btn-confirmar {
    --border-radius: 12px;
    --background: #d38f99;
    --background-activated: #c57e89;
    --color: #fff;
    padding-inline: 18px;
    font-weight: 800;
    box-shadow: 0 4px 10px rgba(183,110,121,.25);
  }
}

/* Barra fija (solo móvil) */
.resumen-fijo {
  position: fixed;
  left: 0; right: 0; bottom: 0;
  padding: 10px 14px env(safe-area-inset-bottom);
  background: rgba(255, 255, 255, .92);
  backdrop-filter: blur(6px);
  border-top: 1px solid #f3c2cc;
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 12px; align-items: center;
  z-index: 30;

  .total {
    display: flex; flex-direction: column; line-height: 1.1;
    span { color: #6b4550; font-size: .86rem; }
    b { color: #7f4b56; font-size: 1.15rem; }
  }
  .btn-confirmar {
    --border-radius: 12px; --background: #d38f99; --color: #fff;
    padding-inline: 18px; font-weight: 800;
    box-shadow: 0 4px 10px rgba(183,110,121,.25);
  }

  @media (min-width: 960px) { display: none; } /* se oculta en desktop */
}

/* —— FECHA & HORARIOS —————————————————————————————— */
.entrega {
  margin-top: 6px;

  /* Fila compacta: etiqueta + botón de fecha */
  .fecha-row {
    display: grid;
    grid-template-columns: auto auto;
    justify-content: space-between;
    align-items: center;
    gap: 10px;
    background: #fff;
    border: 1px solid #f9a8d4;
    border-radius: 14px;
    box-shadow: 0 2px 8px rgba(183,110,121,.08);
    padding: 10px 12px;

    .fecha-label {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      color: var(--brand);
      font-weight: 800;

      ion-icon {
        font-size: 18px;
        color: var(--brand);
      }
    }

    .fecha-btn {
      --background: #fff;
      --border-radius: 10px;
      --border-color: #f3c2cc;
      --color: #7f4b56;
      border: 1px solid #f3c2cc;
      padding: 6px 10px;
      font-weight: 700;
      box-shadow: 0 2px 8px rgba(183,110,121,.06);
    }

    /* Estilo del modal/datetime */
    ion-modal {
      --height: 420px;
      --width: 92vw;
      --max-width: 420px;
      --border-radius: 16px;
      --box-shadow: 0 10px 30px rgba(183,110,121,.20);
    }

    ion-datetime {
      --background: #fff;
      --wheel-highlight-background: #fce8ee;
      --wheel-fade-background-rgb: 255,240,245;
      &::part(calendar-day) { color: #6b4550; }
      &::part(today) { border-color: var(--brand); }
      &::part(indicator) { background: var(--brand); }
      &::part(title) { color: #7f4b56; }
    }
  }

  /* Cabecera y grid de slots */
  .slots {
    margin-top: 10px;
    background: #fff;
    border: 1px solid #f9a8d4;
    border-radius: 14px;
    box-shadow: 0 2px 8px rgba(183,110,121,.08);
    padding: 10px 12px;

    .slots-head {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 8px;
      margin-bottom: 8px;

      &.sticky {
        position: sticky;
        top: 8px;
        z-index: 1;
        background: linear-gradient(180deg, rgba(255,255,255,.96) 0%, rgba(255,255,255,.85) 100%);
        border-radius: 10px;
        padding: 6px 8px;
        border: 1px solid #f3c2cc;
      }

      h4 {
        margin: 0;
        color: #7f4b56;
        font-weight: 900;
        font-family: 'Montserrat', system-ui, sans-serif;
        font-size: 1rem;
      }

      .slots-hint {
        margin: 0;
        font-size: .85rem;
        color: #6b5a61; /* mejora contraste sobre blanco */
        opacity: .9;
      }
    }

    .slots-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(108px, 1fr));
      gap: 8px;
      max-height: 260px;
      overflow: auto;
      padding-right: 4px;

      /* scrollbar suave */
      &::-webkit-scrollbar { width: 8px; height: 8px; }
      &::-webkit-scrollbar-thumb { background: #f3c2cc; border-radius: 10px; }
    }

    .slot-pill {
      display: inline-flex;
      justify-content: center;
      align-items: center;
      gap: 6px;
      height: 36px;
      padding: 0 10px;
      border-radius: 999px;
      border: 1px solid #f3c2cc;
      background: #fff;
      color: #7f4b56;
      font-weight: 800;
      box-shadow: 0 2px 6px rgba(183,110,121,.08);
      cursor: pointer;
      transition: transform .06s ease, box-shadow .12s ease;

      &:hover { transform: translateY(-1px); box-shadow: 0 4px 10px rgba(183,110,121,.12); }

      &.selected {
        background: var(--brand);
        color: #fff;
        border-color: var(--brand);
      }

      &.disabled {
        background: #faf5f7;
        color: #a08893;
        border-style: dashed;
        cursor: not-allowed;
        box-shadow: none;
        filter: grayscale(.1);
        opacity: .85;
      }

      ion-icon { font-size: 18px; }
    }

    .slots-legend {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-top: 8px;
      font-size: .85rem;
      color: #6b5a61;

      .legend-item { display: inline-flex; align-items: center; gap: 6px; }
      .dot {
        display: inline-block; width: 10px; height: 10px; border-radius: 50%;
        &.available { background: #f3c2cc; }
        &.selected  { background: #b76e79; }
        &.disabled  { background: #d8c8ce; }
      }
    }

    .msg-alerta {
      display: block;
      margin-top: 8px;
      color: #9d5f69; /* warning más legible con tu paleta */
      font-weight: 700;
    }
  }

  /* Mensajes generales debajo de slots */
  .msg-error {
    display: block;
    margin-top: 8px;
    background: #ffeef2;
    border: 1px solid #f3c2cc;
    color: #7d3f4a;
    padding: 8px 10px;
    border-radius: 10px;
    font-weight: 700;
  }

  .entrega-visual {
    margin: 8px 2px 0;
    display: flex; gap: 8px; align-items: baseline;
    .etiqueta { color: #7f4b56; font-weight: 800; }
    .valor { color: #3f2a32; }
  }
}

/* Quitar flechas del input numérico de cantidad (solo afecta a qty) */
.lista-filtrada .input-qty::-webkit-outer-spin-button,
.lista-filtrada .input-qty::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
.lista-filtrada .input-qty { -moz-appearance: textfield; }

ion-datetime {
  --background: #fff; /* fondo blanco */
  --color: #6b4550; /* texto oscuro de tu paleta */
  --wheel-highlight-background: #fce8ee; /* highlight pastel */
  --wheel-fade-background-rgb: 255,240,245;

  &::part(title) {
    color: #7f4b56;
    font-weight: 800;
  }

  &::part(calendar-day) {
    color: #6b4550;
  }

  &::part(today) {
    border-color: var(--brand);
  }

  &::part(indicator) {
    background: var(--brand);
  }
}

