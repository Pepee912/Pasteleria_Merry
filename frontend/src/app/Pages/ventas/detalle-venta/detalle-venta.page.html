<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/ver-ventas"></ion-back-button>
    </ion-buttons>
    <ion-title>Detalle de Venta</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding detalle-venta-content" *ngIf="venta">

  <!-- Sección: Cliente -->
  <section class="seccion">
    <h2 class="seccion-titulo">👤 Información del Cliente</h2>
    <div class="seccion-cuerpo">
      <p><strong>Nombre:</strong> {{ venta.pedido.users_permissions_user?.username }}</p>
      <p><strong>Email:</strong> {{ venta.pedido.users_permissions_user?.email }}</p>
    </div>
  </section>

  <!-- Sección: Productos vendidos -->
  <section class="seccion">
    <h2 class="seccion-titulo">🧁 Productos Vendidos</h2>
    <div class="lista-productos">
      <div class="producto-item" *ngFor="let detalle of venta.pedido.detalles_pedidos">
        <h3>{{ detalle.producto?.nombre || 'Producto eliminado' }}</h3>
        <p>Cantidad: {{ detalle.cantidad }}</p>
        <p>Subtotal: ${{ detalle.subtotal }}</p>
      </div>
    </div>
  </section>

  <!-- Sección: Resumen final -->
  <section class="seccion resumen">
    <h2 class="seccion-titulo">📄 Resumen de Venta</h2>
    <div class="seccion-cuerpo">
      <p><strong>Fecha de venta:</strong> {{ venta.fecha_venta | date: 'fullDate' }}</p>
      <p><strong>Total:</strong> ${{ venta.total }}</p>
    </div>
  </section>

</ion-content>
